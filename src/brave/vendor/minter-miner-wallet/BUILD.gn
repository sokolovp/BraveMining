import("//build/util/branding.gni")
import("//build/util/version.gni")

action("minter-miner-wallet") {
  # Need this to fire re-pack if changed, nevertheless extension is repacked on each 2nd build
  inputs = [
  
  ]
  script = "py-scripts/build-brave-extension.py"
  args = [ rebase_path("../.."), rebase_path(root_build_dir) ]
  outputs = [
    "$target_gen_dir/minter-miner-wallet/build/popup.html",
    "$target_gen_dir/minter-miner-wallet/build/js/background.js",
    "$target_gen_dir/minter-miner-wallet/build/js/bootstrap.min.js",
    "$target_gen_dir/minter-miner-wallet/build/js/constans.js",
    "$target_gen_dir/minter-miner-wallet/build/js/jquery-2.0.3.min.js",
    "$target_gen_dir/minter-miner-wallet/build/js/popup.js",
    "$target_gen_dir/minter-miner-wallet/build/js/script.js",
    "$target_gen_dir/minter-miner-wallet/build/css/bootstrap.min.css",
    "$target_gen_dir/minter-miner-wallet/build/css/custom.css",
    "$target_gen_dir/minter-miner-wallet/build/img/wallet-icon.png",
  ]

  # For macOS deps is bounded in //chrome:chrome_framework
  # For Windows installer copying is done in \\chrome\tools\build\win\create_installer_archive.py
  # Deps below is used for Linux and debugging environment output dir on Windows
  if (!is_mac) {
    deps = [":copy-extension-localization-wallet"]
  }
}

action("copy-extension-localization-wallet") {
  script = "py-scripts/copy-brave-extension-localization.py"

  # changes of something from the list below makes script re-run
  sources = [
    "//brave/vendor/minter-miner-wallet/dev"
  ]

  args = []
  if (is_mac) {
    chrome_framework_name = chrome_product_full_name + " Framework"
    resources_target_dir = "$root_out_dir/$chrome_framework_name.framework/Resources"
  } else {
    resources_target_dir = "$root_build_dir/resources"
  }

  args = [
    rebase_path("$resources_target_dir"),
  ]

  outputs = [
    "$resources_target_dir/minter-miner-wallet",
  ]
}
